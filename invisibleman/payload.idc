auto ip;
auto start;
auto end;
auto regBX;
auto regCX;
auto regDX;
auto b;
auto dl, dh;

ip = ScreenEA();

start = SegStart(ip);
end = SegEnd(ip);

Message("Address %x", ip);
Message("Start/End %x/%x", start, end);

regBX = 0x08; 
regCX = 0xb1e; 
regDX = 0xb9cb;


while(regCX > 0)
{
   b = Byte(regBX + start);
   b = b ^ (regDX % 256);
   PatchByte(regBX + start, b);
   regBX = regBX + 1;
   regCX = regCX - 1;
   dl = regDX % 256;
   dh = regDX / 256;
   dl = dl + dh;
   regDX = (dh * 256) + (dl % 256);
}